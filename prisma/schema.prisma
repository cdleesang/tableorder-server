// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Table {
  // Selvers Shared Preference seq
  id           Int     @id
  // Selvers Shared Preference member_id
  memberId     String? @unique
  // Selvers Shared Preference store_table_id
  storeTableId String? @unique

  signInId String
  password String
}

model Admin {
  id       String @id
  signInId String @unique
  password String
  name     String

  adminPermissions   AdminPermission[]
  adminRefreshTokens AdminRefreshToken[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model AdminRefreshToken {
  adminId      String
  admin        Admin    @relation(fields: [adminId], references: [id], onDelete: Cascade)
  refreshToken String
  expiresAt    DateTime
  createdAt    DateTime @default(now())

  @@id([adminId, refreshToken])
}

model AdminPermission {
  adminId    String
  admin      Admin  @relation(fields: [adminId], references: [id], onDelete: Cascade)
  permission String

  @@id([adminId, permission])
}
